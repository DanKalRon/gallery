<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ì–∞–ª–µ—Ä–µ—è –∫–∞—Ä—Ç–∏–Ω</title>
  <link rel="stylesheet" href="style.css">
  <base href="/gallery/">
</head>
<body>
  <!-- –®–∞–ø–∫–∞ -->
  <header>
    <div class="logo">üé® –ì–∞–ª–µ—Ä–µ—è</div>
    <nav>
      <a href="index.html">–ö–∞—Ä—Ç–∏–Ω—ã</a>
      <a href="about.html">–û —Ö—É–¥–æ–∂–Ω–∏–∫–µ</a>
      <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    </nav>
    <div class="socials">
      <a href="https://t.me/kalininaoksana1976" target="_blank">Telegram</a>
      <a href="https://vk.com/id361201748" target="_blank">VK</a>
    </div>
  </header>

  <h1>–ì–∞–ª–µ—Ä–µ—è –∫–∞—Ä—Ç–∏–Ω</h1>
  <div class="gallery" id="gallery"></div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox">
    <span class="close">&times;</span>
    <div class="lightbox-content">
      <img id="lightbox-img" src="" alt="">
      <div class="info">
        <div id="lightbox-title"></div>
        <div id="lightbox-desc"></div>
      </div>
    </div>
  </div>

  <script>
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxTitle = document.getElementById('lightbox-title');
    const lightboxDesc = document.getElementById('lightbox-desc');
    const closeBtn = document.querySelector('.close');

    lightbox.style.display = 'none'; // —Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

    fetch('gallery.json')
      .then(response => response.json())
      .then(data => {
        const gallery = document.getElementById('gallery');

        data.forEach(painting => {
          const div = document.createElement('div');
          div.className = 'item';
          div.innerHTML = `
            <img src="images/${painting.file}" 
                 alt="${painting.title}" 
                 data-title="${painting.title}" 
                 data-desc="${painting.desc}">
            <div class="title">${painting.title}</div>
          function addZoomEffect(img) {
  const lens = document.createElement('div');
  lens.className = 'img-zoom-lens';
  img.parentElement.appendChild(lens);

  const result = document.createElement('div');
  result.className = 'img-zoom-result';
  const zoomedImg = img.cloneNode();
  result.appendChild(zoomedImg);
  img.parentElement.appendChild(result);

  result.style.display = 'block';
  lens.style.display = 'block';

  const cx = result.offsetWidth / lens.offsetWidth;
  const cy = result.offsetHeight / lens.offsetHeight;

  zoomedImg.style.width = img.width * cx + "px";
  zoomedImg.style.height = img.height * cy + "px";

  function moveLens(e) {
    e.preventDefault();
    const pos = getCursorPos(e, img);
    let x = pos.x - lens.offsetWidth / 2;
    let y = pos.y - lens.offsetHeight / 2;

    // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
    if (x > img.width - lens.offsetWidth) x = img.width - lens.offsetWidth;
    if (x < 0) x = 0;
    if (y > img.height - lens.offsetHeight) y = img.height - lens.offsetHeight;
    if (y < 0) y = 0;

    lens.style.left = x + "px";
    lens.style.top = y + "px";
    zoomedImg.style.left = -x * cx + "px";
    zoomedImg.style.top = -y * cy + "px";
  }

  function getCursorPos(e, img) {
    const rect = img.getBoundingClientRect();
    return {
      x: e.pageX - rect.left - window.pageXOffset,
      y: e.pageY - rect.top - window.pageYOffset
    };
  }

  img.addEventListener('mousemove', moveLens);
  lens.addEventListener('mousemove', moveLens);
  img.addEventListener('mouseout', () => {
    lens.style.display = 'none';
    result.style.display = 'none';
  });
  img.addEventListener('mouseover', () => {
    lens.style.display = 'block';
    result.style.display = 'block';
  });
}

// –î–æ–±–∞–≤–ª—è–µ–º –∫ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
data.forEach(painting => {
  const img = gallery.lastChild.querySelector('img'); // –ø–æ—Å–ª–µ–¥–Ω—è—è –¥–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞
  addZoomEffect(img);
});
		  `;
          gallery.appendChild(div);

          const img = div.querySelector('img');
          img.addEventListener('click', (e) => {
            lightbox.style.display = 'flex';
            lightboxImg.src = e.target.src;
            lightboxTitle.textContent = e.target.dataset.title;
            lightboxDesc.textContent = e.target.dataset.desc;

            // –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–ª–µ—Ç–∞
            const rect = e.target.getBoundingClientRect();
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const offsetX = rect.left + rect.width/2 - centerX;
            const offsetY = rect.top + rect.height/2 - centerY;

            lightboxImg.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(0.1)`;
            requestAnimationFrame(() => {
              lightboxImg.style.transition = "transform 0.5s ease";
              lightboxImg.style.transform = "translate(0,0) scale(1)";
            });
          });
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –∫—Ä–µ—Å—Ç–∏–∫–æ–º
        closeBtn.addEventListener('click', () => {
          lightbox.style.display = 'none';
          lightboxImg.style.transition = "none";
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–ª–∏–∫–æ–º –≤–Ω–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
        lightbox.addEventListener('click', (e) => {
          if (e.target === lightbox) {
            lightbox.style.display = 'none';
            lightboxImg.style.transition = "none";
          }
        });
      })
      .catch(error => console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JSON:', error));
	  
	  
  </script>
</body>
</html>